webpackJsonp([13],{"567r":function(i,t){},XUVx:function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{movie:{},list:[],player:{},collected:!1}},activated:function(){this.movie=JSON.parse(localStorage.getItem("video")),this.collected=!1,this.loadVideo(),this.getNewVideos(),console.log(this.movie)},methods:{getNewVideos:function(){var i=this;this.$axios.post(this.$config.videoList).then(function(t){console.log(t);var e=i.movie.osskey.lastIndexOf("."),o=i.movie.osskey.substr(e+1);i.list="mp3"==o?t.data.data.latestAudioList:t.data.data.latestVideoList})},chooseVideo:function(i){this.saveHistory(),this.collected=!1,this.movie=this.list[i],this.loadVideo()},loadVideo:function(){var i=this;this.player.dispose&&this.player.dispose(),this.player=new Aliplayer({id:"player",width:"100%",height:"4.28rem",autoplay:!0,rePlay:!1,cover:this.movie.imgPath,source:this.movie.osskey,controlBarVisibility:"always"},function(t){console.log("加载成功"),t.on("play",function(){localStorage.getItem("login")||(t.pause(),i.$tip("请登录后观看！"))})}),this.movie.watchtime&&this.player.seek(this.movie.watchtime)},collect:function(){var i=this;0==this.collected?(this.collected=!0,this.$axios.post(this.$config.videoCollect,{vid:this.movie.id,createuser:JSON.parse(localStorage.getItem("login")).id}).then(function(t){"0000"==t.data.code&&i.$tip("收藏成功！")})):(this.collected=!1,this.$axios.post(this.$config.uncollectVideo,{vid:this.movie.id,createuser:JSON.parse(localStorage.getItem("login")).id}).then(function(t){console.log(t),"0000"==t.data.code&&i.$tip("取消收藏成功！")}))},back:function(){this.saveHistory(),this.$router.back(-1)},saveHistory:function(){var i=this.player.getCurrentTime();i>0&&localStorage.getItem("login")&&this.$axios.post(this.$config.addHistory,{vid:this.movie.id,createuser:JSON.parse(localStorage.getItem("login")).id,watchtime:i}).then(function(i){console.log(i)})},download:function(){var i=navigator.userAgent,t=(navigator.appVersion,i.indexOf("Android")>-1||i.indexOf("Linux")>-1),e=!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);t&&window.WebViewJavascriptBridge.callHandler("downloadFile",{url:this.movie.osskey,imgUrl:this.movie.imgPath,videoId:this.movie.id,title:this.movie.title},function(i){}),e&&this.setupWebViewJavascriptBridge(function(i){i.callHandler("downloadFile",{url:this.movie.osskey,imgUrl:this.movie.imgPath,videoId:this.movie.id,title:this.movie.title},function(i){})})},setupWebViewJavascriptBridge:function(i){if(window.WebViewJavascriptBridge)return i(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(i);window.WVJBCallbacks=[i];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}}},s={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",[e("a",{staticClass:"back",on:{click:i.back}}),i._v(" "),e("div",{staticClass:"prism-player",attrs:{id:"player"}}),i._v(" "),e("div",{staticClass:"msg"},[e("a",{staticClass:"download",on:{click:i.download}}),i._v(" "),e("a",{staticClass:"collect",class:{active:i.collected},on:{click:i.collect}}),i._v(" "),e("h1",{staticClass:"text-ellipsis"},[i._v(i._s(i.movie.title))]),i._v(" "),e("p",[i._v(i._s(i.movie.classifyName))])]),i._v(" "),e("div",{staticClass:"scroll"},[e("ul",{staticClass:"list"},i._l(i.list,function(t,o){return t.id!=i.movie.id?e("li",{key:o,on:{click:function(t){i.chooseVideo(o)}}},[e("a",[e("div",{staticClass:"img-box"},[e("img",{attrs:{src:t.imgPath}}),i._v(" "),e("span",[i._v(i._s(t.totaltime))])]),i._v(" "),e("p",[i._v(i._s(t.title))])])]):i._e()}))])])},staticRenderFns:[]};var a=e("VU/8")(o,s,!1,function(i){e("567r")},"data-v-5a3e8c54",null);t.default=a.exports}});